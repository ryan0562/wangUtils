<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: device/browser/window.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: device/browser/window.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 浏览器窗口、标签页操作
 * @module device/browser/window
 */

/**
 * 滚动到页面顶部
 * 该函数会平滑地将页面滚动到顶部
 */
export function scrollToTop() {
  const height = document.documentElement.scrollTop || document.body.scrollTop;
  if (height > 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, height - height / 8);
  }
}

/**
 * 滚动到页面底部
 * 该函数会将页面滚动到最底部
 */
export function scrollToBottom() {
  window.scrollTo(0, document.documentElement.clientHeight);
}

/**
 * 平滑滚动到指定元素
 * @param {string} element - 要滚动到的元素的选择器
 * 该函数会平滑地将页面滚动到指定元素的位置
 */
export function smoothScroll(element) {
  document.querySelector(element).scrollIntoView({
    behavior: 'smooth'
  });
};

/**
 * 获取客户端高度
 * @returns {number} - 客户端的高度
 * 该函数会返回当前文档的客户端高度
 */
export function getClientHeight() {
  let clientHeight = 0;
  if (document.body.clientHeight &amp;&amp; document.documentElement.clientHeight) {
    clientHeight = (document.body.clientHeight &lt; document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
  } else {
    clientHeight = (document.body.clientHeight > document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
  }
  return clientHeight;
}

/**
 * 获取页面视口宽度
 * @returns {number} - 页面视口的宽度
 * 该函数会返回当前文档的页面视口宽度
 */
export function getPageViewWidth() {
  return (document.compatMode == "BackCompat" ? document.body : document.documentElement).clientWidth;
}

/**
 * 进入全屏模式
 * 该函数会将当前文档切换到全屏模式
 */
export function toFullScreen() {
  let element = document.body;
  if (element.requestFullscreen) {
    element.requestFullscreen();
  } else if (element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if (element.msRequestFullscreen) {
    element.msRequestFullscreen();
  } else if (element.webkitRequestFullscreen) {
    element.webkitRequestFullScreen();
  }
}

/**
 * 退出全屏模式
 * 该函数会退出当前文档的全屏模式
 */
export function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.msExitFullscreen) {
    document.msExitFullscreen();
  } else if (document.mozCancelFullScreen) {
    document.mozCancelFullScreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  }
}

/**
 * 处理滚动事件
 * @param {function} callback - 滚动事件的回调函数
 * 该函数会在页面滚动时触发回调函数，并传递滚动方向
 */
export function handleScrollHeader(callback) {
  let timer = 0;

  let beforeScrollTop = window.pageYOffset;
  callback = callback || function() {};
  window.addEventListener(
    'scroll',
    event => {
      clearTimeout(timer);
      timer = setTimeout(() => {
        let direction = 'up';
        const afterScrollTop = window.pageYOffset;
        const delta = afterScrollTop - beforeScrollTop;
        if (delta === 0) {
          return false;
        }
        direction = delta > 0 ? 'down' : 'up';
        callback(direction);
        beforeScrollTop = afterScrollTop;
      }, 50);
    },
    false
  );
}

/**
 * 新窗口下载文件
 * @param {string} url - 文件的下载链接
 * @param {string} name - 文件的名称
 * 该函数会在新窗口中下载指定的文件
 */
export function newWindowDownload(url, name) {
  const a = document.createElement('a');
  const isSupportDownload = 'download' in a;

  if (isSupportDownload) {
    a.href = url;
    if (name) {
      a.download = name;
    }
    a.style.display = 'none';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  } else {
    window.open(url);
  }
}

/**
 * 获取浏览器信息
 * @returns {Object} - 包含浏览器类型和版本的对象
 * 该函数会返回当前浏览器的类型和版本信息
 */
export function getExplorerInfo () {
  let t = navigator.userAgent.toLowerCase();
  return 0 &lt;= t.indexOf("msie") ? { //ie &lt; 11
    type: "IE",
    version: Number(t.match(/msie ([\d]+)/)[1])
  } : !!t.match(/trident\/.+?rv:(([\d.]+))/) ? { // ie 11
    type: "IE",
    version: 11
  } : 0 &lt;= t.indexOf("edge") ? {
    type: "Edge",
    version: Number(t.match(/edge\/([\d]+)/)[1])
  } : 0 &lt;= t.indexOf("firefox") ? {
    type: "Firefox",
    version: Number(t.match(/firefox\/([\d]+)/)[1])
  } : 0 &lt;= t.indexOf("chrome") ? {
    type: "Chrome",
    version: Number(t.match(/chrome\/([\d]+)/)[1])
  } : 0 &lt;= t.indexOf("opera") ? {
    type: "Opera",
    version: Number(t.match(/opera.([\d]+)/)[1])
  } : 0 &lt;= t.indexOf("Safari") ? {
    type: "Safari",
    version: Number(t.match(/version\/([\d]+)/)[1])
  } : {
    type: t,
    version: -1
  };
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-data.html">data</a></li><li><a href="module-data_storage.html">data/storage</a></li><li><a href="module-data_storage_cookie.html">data/storage/cookie</a></li><li><a href="module-data_type.html">data/type</a></li><li><a href="module-data_type_array.html">data/type/array</a></li><li><a href="module-data_type_file.html">data/type/file</a></li><li><a href="module-data_type_number.html">data/type/number</a></li><li><a href="module-data_type_object.html">data/type/object</a></li><li><a href="module-data_type_string.html">data/type/string</a></li><li><a href="module-device.html">device</a></li><li><a href="module-device_browser.html">device/browser</a></li><li><a href="module-device_browser_url.html">device/browser/url</a></li><li><a href="module-device_browser_window.html">device/browser/window</a></li><li><a href="module-position.html">position</a></li><li><a href="module-position_lonLat.html">position/lonLat</a></li></ul><h3>Classes</h3><ul><li><a href="WangStorageProxy.html">WangStorageProxy</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Dec 13 2024 18:11:20 GMT+0800 (中国标准时间)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: data/type/string.js | waker-utils</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
        
            <link type="text/css" rel="stylesheet" href="custom.css">
        
    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">waker-utils</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-data.html">data</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data_sub"></div></li><li><a href="module-data_storage.html">data/storage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/storage_sub"></div></li><li><a href="module-data_storage_cookie.html">data/storage/cookie</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/storage/cookie_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_storage_cookie.html#.getCookie">getCookie</a></li></ul></div></li><li><a href="module-data_type.html">data/type</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_type.html#.getType">getType</a></li></ul></div></li><li><a href="module-data_type_array.html">data/type/array</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type/array_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_type_array.html#.mapToArray">mapToArray</a></li><li><a href="module-data_type_array.html#~flatArray">flatArray</a></li><li><a href="module-data_type_array.html#~flatArrayToKey">flatArrayToKey</a></li><li><a href="module-data_type_array.html#~flatArrayToOption">flatArrayToOption</a></li><li><a href="module-data_type_array.html#~shuffleArray">shuffleArray</a></li></ul></div></li><li><a href="module-data_type_file.html">data/type/file</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type/file_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_type_file.html#.blobToDataURL">blobToDataURL</a></li><li><a href="module-data_type_file.html#.validateImageSize">validateImageSize</a></li></ul></div></li><li><a href="module-data_type_number.html">data/type/number</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type/number_sub"></div></li><li><a href="module-data_type_object.html">data/type/object</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type/object_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_type_object.html#.emptyDefault">emptyDefault</a></li><li><a href="module-data_type_object.html#.readPropOnPath">readPropOnPath</a></li></ul></div></li><li><a href="module-data_type_string.html">data/type/string</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:data/type/string_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-data_type_string.html#.amountFormat">amountFormat</a></li><li><a href="module-data_type_string.html#.changeMoneyToChinese">changeMoneyToChinese</a></li><li><a href="module-data_type_string.html#.fistLetterUpper">fistLetterUpper</a></li><li><a href="module-data_type_string.html#.fixNumber">fixNumber</a></li><li><a href="module-data_type_string.html#.fixPercentage">fixPercentage</a></li><li><a href="module-data_type_string.html#.fomartBankCardCode">fomartBankCardCode</a></li><li><a href="module-data_type_string.html#.getCamelCase">getCamelCase</a></li><li><a href="module-data_type_string.html#.getKebabCase">getKebabCase</a></li><li><a href="module-data_type_string.html#.hideString">hideString</a></li><li><a href="module-data_type_string.html#.intToChinese">intToChinese</a></li><li><a href="module-data_type_string.html#.numberFormat">numberFormat</a></li><li><a href="module-data_type_string.html#.toCDB">toCDB</a></li><li><a href="module-data_type_string.html#.toDBC">toDBC</a></li></ul></div></li><li><a href="module-device.html">device</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:device_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-device.html#.getBroswerInfo">getBroswerInfo</a></li><li><a href="module-device.html#.getBrowserType">getBrowserType</a></li><li><a href="module-device.html#.getDPI">getDPI</a></li><li><a href="module-device.html#.getOSType">getOSType</a></li><li><a href="module-device.html#.isAppleMobileDevice">isAppleMobileDevice</a></li><li><a href="module-device.html#.isIE">isIE</a></li><li><a href="module-device.html#.isMobile">isMobile</a></li><li><a href="module-device.html#~getA4PixelSize">getA4PixelSize</a></li></ul></div></li><li><a href="module-device_browser.html">device/browser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:device/browser_sub"></div></li><li><a href="module-device_browser_url.html">device/browser/url</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:device/browser/url_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-device_browser_url.html#.getQuery">getQuery</a></li><li><a href="module-device_browser_url.html#.ob2Params">ob2Params</a></li><li><a href="module-device_browser_url.html#.removeURLParameters">removeURLParameters</a></li><li><a href="module-device_browser_url.html#.replaceQuery">replaceQuery</a></li><li><a href="module-device_browser_url.html#.resolveURLParameters">resolveURLParameters</a></li></ul></div></li><li><a href="module-device_browser_window.html">device/browser/window</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:device/browser/window_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-device_browser_window.html#.exitFullscreen">exitFullscreen</a></li><li><a href="module-device_browser_window.html#.getClientHeight">getClientHeight</a></li><li><a href="module-device_browser_window.html#.getExplorerInfo">getExplorerInfo</a></li><li><a href="module-device_browser_window.html#.getPageViewWidth">getPageViewWidth</a></li><li><a href="module-device_browser_window.html#.handleScrollHeader">handleScrollHeader</a></li><li><a href="module-device_browser_window.html#.newWindowDownload">newWindowDownload</a></li><li><a href="module-device_browser_window.html#.scrollToBottom">scrollToBottom</a></li><li><a href="module-device_browser_window.html#.scrollToTop">scrollToTop</a></li><li><a href="module-device_browser_window.html#.smoothScroll">smoothScroll</a></li><li><a href="module-device_browser_window.html#.toFullScreen">toFullScreen</a></li></ul></div></li><li><a href="module-position.html">position</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:position_sub"></div></li><li><a href="module-position_lonLat.html">position/lonLat</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:position/lonLat_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-position_lonLat.html#.convertLonLatToGCJ">convertLonLatToGCJ</a></li><li><a href="module-position_lonLat.html#.transformLatx">transformLatx</a></li><li><a href="module-position_lonLat.html#.transformLon">transformLon</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="WangStorageProxy.html">WangStorageProxy</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WangStorageProxy_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#timeIntervalFormat">timeIntervalFormat</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 字符串 类型操作
 * @module data/type/string
 */


import {isNil} from "lodash";

/**
 * 将数字转换为百分比格式
 * @param {number} value - 要转换的数字
 * @param {number} dec - 小数位数，默认为 1
 * @param {string} defaultValue - 如果 value 为无效值，则返回的默认值，默认为 '--'
 * @returns {string} - 格式化后的百分比字符串
 */
export function fixPercentage (value, dec = 1, defaultValue = '--') {
  if (_.isNil(value) || Number.isNaN(+value) || (typeof value === 'string' &amp;&amp; value.length === 0)) {
    return defaultValue;
  }
  const n = (+value).toFixed(dec);
  return `${n}%`;
}

/**
 * 金额格式化，例如 1,100,000.23
 * @param {number} value - 要格式化的金额
 * @param {number} dec - 小数位数，默认为 2
 * @returns {string} - 格式化后的金额字符串
 */
export function amountFormat (value, dec) {
  const s = Number(value).toFixed(dec);
  const l = s.split(".")[0].split("").reverse()
  const r = '.' + s.split(".")[1];
  let t = "";
  for (let i = 0; i &lt; l.length; i++) {
    t += l[i] + ((i + 1) % 3 == 0 &amp;&amp; (i + 1) != l.length ? "," : "");
  }

  const reStr = dec === 0 ?
    t.split("").reverse().join("") :
    t.split("").reverse().join("") + r
  return reStr;
}

/**
 * 隐私字段用*转换，例如 aaaa****bbbb
 * @param {string} value - 要转换的字符串
 * @param {number} before - 保留前面的字符数
 * @param {number} after - 保留后面的字符数
 * @returns {string} - 格式化后的字符串
 */
export function hideString (value, before, after) {
  if (!value) {
    return;
  }
  value = String(value);
  let beforeStr = value.substr(0, before);
  let afterStr = after ? value.substr(-after) : '';
  let hideLen = value.length - before - after;

  let reVal = beforeStr + '*'.repeat(hideLen) + afterStr;
  return reVal; //将格式化后的字符串输出到前端显示
}

/**
 * 格式化银行卡号，目前规则为 4 个字符加一个空格
 * @param {string} bankCardCode - 要格式化的银行卡号
 * @returns {string} - 格式化后的银行卡号
 */
export function fomartBankCardCode (bankCardCode) {

  //遍历账户
  let spaceStr = "";
  for (let i = 0, len = bankCardCode.length; i &lt; len; i++) {
    //每4个字符加一个空格
    if (i % 4 === 0) {
      spaceStr += " " + bankCardCode[i];
    } else {
      spaceStr += bankCardCode[i];
    }
  }
  return spaceStr;
}

/**
 * 将金额转换为中文大写形式
 * @param {number} n - 要转换的金额
 * @returns {string} - 转换后的中文大写金额
 */
export function changeMoneyToChinese (n) {
  var fraction = ['角', '分'];
  var digit = [
    '零', '壹', '贰', '叁', '肆',
    '伍', '陆', '柒', '捌', '玖'
  ];
  var unit = [
    ['元', '万', '亿'],
    ['', '拾', '佰', '仟']
  ];
  var head = n &lt; 0 ? '欠' : '';
  n = Math.abs(n);
  var s = '';
  for (var i = 0; i &lt; fraction.length; i++) {
    s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
  }
  s = s || '整';
  n = Math.floor(n);
  for (var i = 0; i &lt; unit[0].length &amp;&amp; n > 0; i++) {
    var p = '';
    for (var j = 0; j &lt; unit[1].length &amp;&amp; n > 0; j++) {
      p = digit[n % 10] + unit[1][j] + p;
      n = Math.floor(n / 10);
    }
    s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
  }
  return head + s.replace(/(零.)*零元/, '元').replace(/(零.)+/g, '零').replace(/^整$/, '零元整');
}

/**
 * 将整数转换为中文
 * @param {number} value - 要转换的整数
 * @returns {string} - 转换后的中文字符串
 */
export function intToChinese (value) {
  const str = String(value);
  const len = str.length - 1;
  const idxs = ['', '十', '百', '千', '万', '十', '百', '千', '亿', '十', '百', '千', '万', '十', '百', '千', '亿'];
  const num = ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];
  return str.replace(/([1-9]|0+)/g, ($, $1, idx, full) => {
    let pos = 0;
    if ($1[0] !== '0') {
      pos = len - idx;
      if (idx == 0 &amp;&amp; $1[0] == 1 &amp;&amp; idxs[len - idx] == '十') {
        return idxs[len - idx];
      }
      return num[$1[0]] + idxs[len - idx];
    } else {
      let left = len - idx;
      let right = len - idx + $1.length;
      if (Math.floor(right / 4) - Math.floor(left / 4) > 0) {
        pos = left - left % 4;
      }
      if (pos) {
        return idxs[pos] + num[$1[0]];
      } else if (idx + $1.length >= len) {
        return '';
      } else {
        return num[$1[0]]
      }
    }
  });
}

/**
 * 金额格式化方法  只有万元
 * @param {number} value - 要格式化的金额
 * @param {number} k - 单位转换的基数，默认为 10000
 * @returns {Object} - 包含格式化后金额和单位的对象
 */
export function numberFormat (value, k = 10000) {
  if (!value) {
    return {
      value: 0,
      unit: '元',
    }
  }
  var param = {}
  var sizes = ['元', '万元', '亿元', '万亿元']
  if (value &lt; k) {
    param.value = toFixed(value)
    param.unit = '元'
  } else {
    let i = Math.floor(Math.log(value) / Math.log(k))
    param.value = ((value / Math.pow(k, i))).toFixed(2)
    param.unit = sizes[i]
  }
  return param
}

/**
 * 将字符串的首字母转换为大写
 * @param {string} str - 要转换的字符串
 * @returns {string} - 转换后的字符串
 */
export function fistLetterUpper (str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
};

/**
 * 将字符串转换为 kebab-case 格式
 * @param {string} str - 要转换的字符串
 * @returns {string} - 转换后的字符串
 */
export function getKebabCase (str)  {
  return str.replace(/[A-Z]/g, (item) => '-' + item.toLowerCase())
}

/**
 * 将字符串转换为 camelCase 格式
 * @param {string} str - 要转换的字符串
 * @returns {string} - 转换后的字符串
 */
export function getCamelCase  (str)  {
  return str.replace(/-([a-z])/g, (i, item) => item.toUpperCase())
}

/**
 * 将字符串转换为全角字符
 * @param {string} str - 要转换的字符串
 * @returns {string} - 转换后的字符串
 */
export function toCDB  (str)  {
  let result = "";
  for (let i = 0; i &lt; str.length; i++) {
    code = str.charCodeAt(i);
    if (code >= 65281 &amp;&amp; code &lt;= 65374) {
      result += String.fromCharCode(str.charCodeAt(i) - 65248);
    } else if (code == 12288) {
      result += String.fromCharCode(str.charCodeAt(i) - 12288 + 32);
    } else {
      result += str.charAt(i);
    }
  }
  return result;
}

/**
 * 将字符串转换为半角字符
 * @param {string} str - 要转换的字符串
 * @returns {string} - 转换后的字符串
 */
export function toDBC (str)  {
  let result = "";
  for (let i = 0; i &lt; str.length; i++) {
    code = str.charCodeAt(i);
    if (code >= 33 &amp;&amp; code &lt;= 126) {
      result += String.fromCharCode(str.charCodeAt(i) + 65248);
    } else if (code == 32) {
      result += String.fromCharCode(str.charCodeAt(i) + 12288 - 32);
    } else {
      result += str.charAt(i);
    }
  }
  return result;
}

/**
 * 保留小数位数
 * @param {number} value - 要格式化的数字
 * @param {number} dec - 要保留的小数位数，默认为 2
 * @param {number} divisor - 用于除 value 的除数，默认为 1
 * @param {string} defaultValue - 如果 value 为 null 或 NaN，则返回的默认值，默认为 '--'
 * @returns {string} - 格式化后的数字字符串
 */
export function fixNumber (value, dec = 2, divisor = 1, defaultValue = '--') {
  if (isNil(value) || Number.isNaN(+value)) {
    return defaultValue;
  }
  return (+value / divisor).toFixed(dec);
}



</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">waker</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
